-- DESC INFORMATION_SCHEMA.TABLES;
-- DESC INFORMATION_SCHEMA.INNODB_INDEXES;
-- DESC INFORMATION_SCHEMA.INNODB_TABLES;
-- DESC INFORMATION_SCHEMA.STATISTICS;

/*
SELECT 
       A.TABLE_SCHEMA
	 , A.TABLE_NAME
     , C.NAME AS "INDEX_NAME"
     , C.TYPE
     , C.N_FIELDS
     , C.PAGE_NO
     , C.SPACE
     , C.MERGE_THRESHOLD
  FROM INFORMATION_SCHEMA.TABLES A
 INNER JOIN INFORMATION_SCHEMA.INNODB_TABLES B
    ON CONCAT(A.TABLE_SCHEMA, '/', A.TABLE_NAME) = B.NAME
 INNER JOIN INFORMATION_SCHEMA.INNODB_INDEXES C
    ON B.TABLE_ID = C.TABLE_ID
 WHERE A.TABLE_SCHEMA IN (
	   'ERPAPP'
	 , 'INORG'
	 , 'ERPHRRT'
	 , 'FLYWAY'
	 , 'SAC')
 ORDER BY 1,2,3
;	
*/

-- SHOW INDEX FROM [TABLE_NAME] LIKE '%%';
-- SHOW INDEX FROM [TABLE_NAME] FROM [DB_NAME];

SELECT 
--        TABLE_CATALOG
       TABLE_SCHEMA
     , TABLE_NAME
--      , INDEX_SCHEMA
     , INDEX_NAME
     , CASE NON_UNIQUE WHEN 0 THEN 'UNIQUE' ELSE 'NON_UNIQUE' END AS UNIQUENESS
     , COLUMN_NAME
     , SEQ_IN_INDEX
     , CASE COLLATION WHEN 'A' THEN 'ASC' WHEN 'D' THEN 'DESC' ELSE NULL END AS COLLATION
     , CARDINALITY
     , SUB_PART
     , PACKED
     , NULLABLE
     , INDEX_TYPE
     , COMMENT
     , INDEX_COMMENT
     , IS_VISIBLE
     , EXPRESSION
  FROM
    INFORMATION_SCHEMA.STATISTICS
 WHERE TABLE_SCHEMA IN (
	   'ERPAPP'
	 , 'INORG'
	 , 'ERPHRRT'
	 , 'FLYWAY'
	 , 'SAC')
 ORDER BY 1, 2, 3, 6
;


-- 사용자가 생성한 테이블들에 존재하는 인덱스들의 목록 확인
-- 인덱스 이름 및 유니크 속성, 구성 칼럼 등의 정보 확인
SELECT table_schema
     , table_name
     , index_name
     , non_unique
     , subpart_exists
     , index_columns
  FROM sys.x$schema_flattened_keys;
